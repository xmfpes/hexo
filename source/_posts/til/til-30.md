---
title: TIL-30
date: 2017-11-27 23:10:03
tags:
- TIL
categories:
- 기타
- TIL
---

![til](/images/til/til.jpg)

면접과 기타 여러 일들로 인해 til이 상당히 많이 밀렸다.
그리고 그 동안 공부도 많이 하지 못한것 같다.

## 오늘 한 일

- ### Spring Security OAuth2 Social Login 구현

그동안 엄청 어렵게 느끼고 있었던, 스프링에서의 소셜 로그인을 구현해봤다. OAuth2기반으로 되어있다고 하는데 사실 어떤 방식으로 정확히 인증이 이루어지는지는 잘 모르겠다.

기회가 된다면 Spring Security 없이 한번 구현해보고 싶은 생각도 들지만. 필터나 이런 보안쪽을 내가 직접 만드는게 그리 녹록치만은 않을 것 같다.

솔직히 Pivotal의 tutorial이 잘 되있어서 구현은 금방 했는데, 설명이 조금 불친절한 것 같다.

내부적으로 어떻게 돌아가는지나 어디서 뭘 어떻게 처리하는지에 대해서는 전혀 모르겠다.



application.yml 파일의 facebook 앱 관련 id와 시크릿 키를 받아서, 빈으로 만들어주고 ssoFilter를 적용해주고.. oauth2ClientContext의 의존성 주입은 어디서 일어나는지..

```
FilterRegistrationBean registration = new FilterRegistrationBean();
registration.setFilter(filter);
registration.setOrder(-100);
```

위 코드는 Spring Security보다 낮은 순서로 필터를 등록하고, 이를 이용해 인증 요청의 예외에 의해 리다이렉션을 처리하는데 사용할 수 있다. 라고 설명이 되어 있었는데, 이 부분에서 시큐리티보다 낮은 순서로 필터를 등록? 이런 부분이 잘 이해가 되지 않았다.

- ### Spring Security 회원가입 / 로그인 구현

저번에 한번 구현해 본 기능이라 금방 구현하긴 했는데 막상 다시 하려니까 잘 되지 않았다. username으로 받는 부분에서 이름이 정해진걸 모르고 삽질을 한게 가장 큰 원인이긴 했는데 이부분은 뭔가 눈에 확 들어오지 않는다. 큰 그림이 안 그려진다고 해야하나. 회원가입의 경우 기본적으로 내가 구현하는것처럼 하고, 패스워드만 다시 받아서 BCryptPasswordEncoder를 이용해 암호화하고 저장해줬는데 이정도 설정만 주면 되는건지 모르겠다.

로그인 같은 경우는 디비의 값을 이용해 정상 로그인 되긴 하는데 흐름이 머릿속에 그려지지 않는다.



## 내일 할 일

- ### Spring Security 내용들 정리

내일은 다른거 안 하고 오늘 한 Spring Security 에 대한 이해와 정리를 할 생각이다.

요즘 집중을 못하는데, 시큐리티가 어느정도 마무리되면 도커를 다시 볼 생각이다.





------

이번에 느낀건데 한글로 된 자료가 진짜 별로 없다..영어 공부의 필요성을 조금 느끼고 있다.

시큐리티로 검색하면 특정 자료 한 3-4개 정도? 말고는 볼게 별로 없었던 것 같다. 

엔씨소프트는 오늘 발표가 예정되어 있었는데 내부 사정으로 연기됐다고 한다. 수요일까진 또 긴장.. 

얼른 저번에 리스트를 받은 곳 중 몇군데 이력서를 써야 하는데, 프레임워크 구현과 관련해서 포트폴리오를 완성하고 제출하고 싶다. 만약 기간 내 못한다면 일단 지금 작성한 이력서로라도 제출해야겠다.